{% comment %}
Template de restablecimiento de contraseña

Este template se muestra cuando el usuario hace clic en el enlace de recuperación
de contraseña enviado por correo. Tiene diferentes estados:

Estados posibles:
- show_form: Muestra el formulario para ingresar la nueva contraseña
- complete: Muestra mensaje de éxito después de cambiar la contraseña
- error: Muestra error si el enlace es inválido o ha caducado

El token de recuperación tiene una validez de 15 minutos.
{% endcomment %}
{% extends 'base.html' %}
{% load static %}

{% block content %}

    <div class="admin-container">
        <div class="recuperacion-card">
   
            {% comment %}
            Estado: Mostrar formulario de nueva contraseña
            Se muestra cuando el token es válido y el usuario puede establecer su nueva contraseña
            {% endcomment %}
            {% if status == "show_form" %}
                <h2>Restablecer contraseña</h2>
                <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Guardar nueva contraseña</button>
                </form>

            {% comment %}
            Estado: Contraseña restablecida exitosamente
            Se muestra después de que el usuario ha cambiado su contraseña correctamente
            {% endcomment %}
            {% elif status == "complete" %}
                <h2>✅ Tu contraseña fue restablecida con éxito.</h2>
                <a href="{% url 'login' %}">Ir al inicio</a>

            {% comment %}
            Estado: Error en el formulario
            Se muestra si hay errores de validación en el formulario
            {% endcomment %}
            {% elif status == "show_form" %}
                <h2>⚠️ Hubo un error en el formulario</h2>
                <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Guardar nueva contraseña</button>
                </form>

            {% comment %}
            Estado: Enlace inválido o caducado
            Se muestra si el token de recuperación no es válido o ha expirado (15 minutos)
            {% endcomment %}
            {% elif status == "error" %}
                <h2>❌ Enlace inválido o caducado.</h2>
                <button onclick="window.location.href='{% url 'login' %}'" >Solicitar nuevo enlace</button>
            {% endif %}
        </div>
    </div>

{% endblock %}